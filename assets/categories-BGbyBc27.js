import{b as r,r as E,a as h}from"./toast-CCRlhVFf.js";import{o as l,d as C,e as T,a as b,b as I,t as x,c as A,f as B,g as i,h as v,i as k,j as w,k as S,m as M,n as $,p as g,q as y,r as u,s as F,u as N,v as q}from"./todo-B4VG5EOB.js";const H=t=>{const e=document.querySelector(`[data-category-container-id="${t}"]`);e&&(e.classList.contains("active")?(r(e,"closing"),setTimeout(()=>{E(e,"active","closing")},300)):r(e,"active"))},D=t=>{t.addEventListener("click",e=>{const o=e.currentTarget.getAttribute("data-category-id");H(o),t.classList.contains("chevron-rotated")?(t.classList.toggle("chevron-rotate-back"),setTimeout(()=>{t.classList.toggle("chevron-rotate-back"),t.classList.toggle("chevron-rotated")},300)):(t.classList.toggle("chevron-rotating"),setTimeout(()=>{t.classList.toggle("chevron-rotating"),t.classList.toggle("chevron-rotated")},300))})},d=document.getElementById("categories-container");let n=null;const m=t=>{const e=t.getAttribute("data-todo-id"),o=t.getAttribute("data-todo-title"),s=t.getAttribute("data-todo-category");n={todoId:e,todoTitle:o,todoCategory:s}};d==null||d.addEventListener("click",async t=>{const e=t.target.closest(".delete-todo"),o=t.target.closest(".edit-todo");if(e)m(e),l(C);else if(o)m(o),T.value=n.todoTitle,b.value=n.todoCategory,l(I);else if(t.target.classList.contains("toggle-checkbox")){const s=t.target.getAttribute("data-id"),a=await x(s);a.success?document.getElementById(`todo-${s}-title`).classList.toggle("done"):h(a.message)}});const U=()=>{g.disabled=!1,g.innerText="Add",y.innerText="",v.classList.remove("input-error")},j=()=>{u.disabled=!1,u.innerText="Edit",y.innerText="",T.classList.remove("input-error")};A.addEventListener("submit",async t=>{t.preventDefault();const e=await B();e&&(U(),i.innerText==="No todos added yet."&&(i.innerText=""),i.prepend(e),lucide.createIcons(),v.value="",k.value="")});w.addEventListener("submit",async t=>{t.preventDefault();const e=n.todoId;await S(e)&&j()});M.addEventListener("click",async()=>{const t=n.todoId;await $(t),i.innerHTML===""&&(i.innerText="No todos added yet.")});const z=async()=>{const t=await F(N.id);if(t.success){const e=t.data;for(let o in e){const s=e[o],a=document.createElement("div");a.dataset.categoryContainerId=o,a.classList.add("category-container","active");const c=document.createElement("div");c.classList.add("category-header"),c.innerHTML=`
          <div class="flex items-center gap-1">
            <button
              class="btn btn-icon"
              id="category-toggle-button"
              data-category-id="${o}"
            >
              <i data-lucide="chevron-up"></i>
            </button>
            <h1 class="category-title">${o}</h1>
          </div>
      `,d.appendChild(c),s.forEach(f=>{const L=q(f);a.appendChild(L)}),d.appendChild(a),d.appendChild(document.createElement("br"));const p=document.querySelector(`[data-category-id="${o}"]`);D(p)}}lucide.createIcons()};z();
